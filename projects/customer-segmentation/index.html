<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Segmentation | Mark M. Orwa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#050510',
                        neon: { cyan: '#00f3ff', purple: '#bc13fe', blue: '#0066ff' },
                    },
                    fontFamily: {
                        orbitron: ['Orbitron', 'sans-serif'],
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Orbitron:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            background-color: #050510;
            font-family: 'Inter', sans-serif;
        }

        h1,
        h2,
        h3 {
            font-family: 'Orbitron', sans-serif;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body class="bg-bg text-white min-h-screen flex flex-col">
    <!-- Background Glows -->
    <div
        class="fixed bottom-[-20%] right-[-10%] w-[500px] h-[500px] bg-purple-500/10 rounded-full blur-[120px] pointer-events-none">
    </div>

    <div class="container mx-auto px-4 py-8 flex-grow flex flex-col">
        <header class="flex justify-between items-center mb-8">
            <a href="../../skills/data-science.html"
                class="text-cyan-400 hover:text-white transition-colors flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7" />
                </svg>
                Back to Data Science
            </a>
            <h1
                class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">
                CUSTOMER SEGMENTATION ENGINE
            </h1>
        </header>

        <main class="flex-grow flex flex-col md:flex-row gap-8">
            <!-- Controls -->
            <div class="w-full md:w-1/3 glass-panel p-6 rounded-2xl h-fit">
                <h2 class="text-xl font-bold mb-4 text-purple-400">Clustering Parameters</h2>
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Number of Clusters (K)</label>
                        <input type="range" id="clusters" min="2" max="6" value="3" class="w-full accent-purple-400">
                        <div class="flex justify-between text-xs text-gray-500"><span>2</span><span>6</span></div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Data Points</label>
                        <input type="range" id="points" min="50" max="200" value="100" class="w-full accent-purple-400">
                    </div>
                    <button id="recluster"
                        class="w-full py-3 rounded-lg bg-purple-400/10 border border-purple-400 text-purple-400 hover:bg-purple-400 hover:text-black font-bold transition-all">
                        RUN K-MEANS
                    </button>
                </div>
                <div class="mt-8 pt-6 border-t border-white/10">
                    <h3 class="text-lg font-bold mb-2">About Project</h3>
                    <p class="text-sm text-gray-400 leading-relaxed">
                        Interactive K-Means clustering visualization.
                        It generates random customer data (Spending Score vs Annual Income) and groups them into 'K'
                        distinct segments using a simulated centroid-based algorithm.
                    </p>
                </div>
            </div>

            <!-- Visualization -->
            <div class="w-full md:w-2/3 glass-panel p-6 rounded-2xl flex flex-col">
                <canvas id="clusterChart" class="w-full h-full"></canvas>
            </div>
        </main>
    </div>

    <script>
        const ctx = document.getElementById('clusterChart').getContext('2d');
        let chart;

        function generateClusters() {
            const k = parseInt(document.getElementById('clusters').value);
            const count = parseInt(document.getElementById('points').value);

            // Generate random centroids
            const centroids = [];
            for (let i = 0; i < k; i++) {
                centroids.push({
                    x: Math.random() * 100,
                    y: Math.random() * 100
                });
            }

            // Generate points around centroids
            const datasets = [];
            const colors = ['#00f3ff', '#bc13fe', '#ff0055', '#ffff00', '#00ff66', '#ffffff'];

            for (let i = 0; i < k; i++) {
                const data = [];
                const pointsPerCluster = Math.floor(count / k);

                for (let j = 0; j < pointsPerCluster; j++) {
                    // Gaussian-ish distribution
                    const u = 1 - Math.random();
                    const v = Math.random();
                    const z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);

                    data.push({
                        x: centroids[i].x + (z * 10), // Spread
                        y: centroids[i].y + ((Math.random() - 0.5) * 20)
                    });
                }

                datasets.push({
                    label: `Segment ${i + 1}`,
                    data: data,
                    backgroundColor: colors[i],
                    pointRadius: 5,
                    pointHoverRadius: 8
                });
            }

            return datasets;
        }

        function updateChart() {
            const datasets = generateClusters();

            if (chart) chart.destroy();

            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#fff' } },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return `Income: $${Math.round(context.parsed.x)}k, Score: ${Math.round(context.parsed.y)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            title: { display: true, text: 'Spending Score (1-100)', color: '#aaa' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#aaa' },
                            min: 0, max: 120
                        },
                        x: {
                            title: { display: true, text: 'Annual Income (k$)', color: '#aaa' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#aaa' },
                            min: 0, max: 120
                        }
                    }
                }
            });
        }

        document.getElementById('recluster').addEventListener('click', updateChart);
        document.addEventListener('DOMContentLoaded', updateChart);
    </script>
</body>

</html>